(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const c of e.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function s(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function i(t){if(t.ep)return;t.ep=!0;const e=s(t);fetch(t.href,e)}})();const r={currentLocation:"Stockholm",currentUnit:"metric",isLoading:!1,weatherData:null,errorMessage:""},p=document.getElementById("location-form"),h=document.getElementById("location-input"),m=document.getElementById("error-message"),f=document.getElementById("loading"),g=document.getElementById("current-temp"),y=document.getElementById("current-conditions"),l=document.getElementById("forecast-list"),d=document.getElementById("unit-toggle"),E=document.getElementById("current-weather-title");async function L(n,o){const i=`https://weather.visualcrossing.com/VisualCrossingWebServices/rest/services/timeline/${n}?unitGroup=${o}&key=ELPP4YC3AJ7F4NE3SJF5MXJTA`;try{const t=await fetch(i);if(!t.ok)throw new Error("Location not found or API error");const e=await t.json();return w(e)}catch(t){throw t}}function w(n){const o={temp:n.currentConditions.temp,conditions:n.currentConditions.conditions},s=n.days.slice(0,5).map(i=>({date:i.datetime,high:i.tempmax,low:i.tempmin,conditions:i.conditions}));return{current:o,forecast:s}}function C(){if(r.weatherData){let t=function(e){const c=e.trim();return c===""?"":c.split(" ").map(u=>u.charAt(0).toUpperCase()+u.slice(1).toLowerCase()).join(" ")};var n=t;const{current:o,forecast:s}=r.weatherData,i=r.currentUnit==="metric"?"°C":"°F";E.textContent=`Current Weather in ${t(r.currentLocation)}`,g.textContent=`Temperature: ${o.temp}${i}`,y.textContent=`Conditions: ${o.conditions}`,l.innerHTML="",s.forEach(e=>{const c=document.createElement("div");c.classList.add("forecast-day"),c.innerHTML=`
        <h3>${e.date}</h3>
        <p>High: ${e.high}${i}</p>
        <p>Low: ${e.low}${i}</p>
        <p>${e.conditions}</p>
      `,l.appendChild(c)})}}function I(){r.isLoading=!0,f.style.display="block"}function $(){r.isLoading=!1,f.style.display="none"}function v(n){r.errorMessage=n,m.textContent=n}function B(){r.errorMessage="",m.textContent=""}async function a(){I(),B();try{const n=await L(r.currentLocation,r.currentUnit);r.weatherData=n,C()}catch(n){v(n.message),r.weatherData=null}finally{$()}}p.addEventListener("submit",n=>{n.preventDefault();const o=h.value.trim();o&&(r.currentLocation=o,a())});d.addEventListener("click",()=>{r.currentUnit=r.currentUnit==="metric"?"us":"metric",d.textContent=r.currentUnit==="metric"?"Switch to Fahrenheit":"Switch to Celsius",a()});a();
